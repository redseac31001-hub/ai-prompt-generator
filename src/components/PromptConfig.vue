<template>
  <div class="prompt-config">
    <div class="config-header">
      <h2>ÈÖçÁΩÆÈù¢Êùø</h2>
      <div class="config-actions">
        <el-button size="small" type="text" @click="toggleCollapse">
          <el-icon><component :is="isCollapsed ? 'ArrowDown' : 'ArrowUp'" /></el-icon>
          {{ isCollapsed ? 'Â±ïÂºÄ' : 'Êî∂Ëµ∑' }}
        </el-button>
        <el-button size="small" type="text" @click="resetConfig">
          <el-icon><Refresh /></el-icon>
          ÈáçÁΩÆ
        </el-button>
      </div>
    </div>
    
    <el-form :model="config" label-width="80px" label-position="top">
      <!-- È¢ÑËÆæÊ®°Êùø - ÁΩÆÈ°∂ÊòæÁ§∫ -->
      <div class="template-section">
        <div class="template-header">
          <h3>üöÄ Âø´ÈÄüÂºÄÂßã</h3>
          <span class="template-desc">ÈÄâÊã©È¢ÑËÆæÊ®°ÊùøÂø´ÈÄüÈÖçÁΩÆ</span>
        </div>
        <div class="template-grid">
          <div 
            v-for="template in templates" 
            :key="template.id"
            class="template-card"
            :class="{ active: selectedTemplate === template.id }"
            @click="loadTemplate(template.id)"
          >
            <div class="template-icon">{{ getTemplateIcon(template.id) }}</div>
            <div class="template-info">
              <h4>{{ template.name }}</h4>
              <p>{{ template.description }}</p>
            </div>
            <div class="template-actions">
              <el-button size="small" type="primary" plain>‰ΩøÁî®</el-button>
            </div>
          </div>
        </div>
      </div>

      <!-- Âü∫Á°ÄÈÖçÁΩÆ - ÂßãÁªàÊòæÁ§∫ -->
      <div class="config-section">
        <div class="section-header" @click="toggleSection('basic')">
          <h3>Âü∫Á°ÄÈÖçÁΩÆ</h3>
          <el-icon class="section-toggle">
            <component :is="expandedSections.basic ? 'ArrowUp' : 'ArrowDown'" />
          </el-icon>
        </div>
        <div v-show="expandedSections.basic" class="section-content">
          <el-form-item label="ËßíËâ≤ÂàÜÁ±ª">
            <el-select v-model="config.roleCategory" placeholder="ÈÄâÊã©ËßíËâ≤ÂàÜÁ±ª" @change="onRoleCategoryChange">
              <el-option v-for="category in roleCategories" :key="category.value" :label="category.label" :value="category.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="ÂÖ∑‰ΩìËßíËâ≤">
            <el-select v-model="config.role" placeholder="ÈÄâÊã©ÊàñËæìÂÖ•ÂÖ∑‰ΩìËßíËâ≤" filterable allow-create>
              <el-option v-for="role in filteredRoleOptions" :key="role" :label="role" :value="role" />
            </el-select>
          </el-form-item>

          <!-- ÊäÄÊúØÊ†àÈÄâÊã©Ôºà‰ªÖÂΩìÂâçÁ´ØÂºÄÂèëÊó∂ÊòæÁ§∫Ôºâ -->
          <el-form-item v-if="config.roleCategory === 'development'" label="ÊäÄÊúØÊ†à">
            <el-select v-model="config.techStack" placeholder="ÈÄâÊã©ÊäÄÊúØÊ†à" multiple>
              <el-option v-for="tech in frontendTechStack" :key="tech" :label="tech" :value="tech" />
            </el-select>
          </el-form-item>
        </div>
      </div>

      <!-- ‰ªªÂä°ÈÖçÁΩÆ -->
      <div class="config-section">
        <div class="section-header" @click="toggleSection('task')">
          <h3>‰ªªÂä°ÈÖçÁΩÆ</h3>
          <el-icon class="section-toggle">
            <component :is="expandedSections.task ? 'ArrowUp' : 'ArrowDown'" />
          </el-icon>
        </div>
        <div v-show="expandedSections.task" class="section-content">
          <el-form-item label="‰ªªÂä°ÊèèËø∞">
            <el-input
              v-model="config.task"
              type="textarea"
              :rows="3"
              placeholder="ÊèèËø∞ÂÖ∑‰ΩìË¶ÅÂÆåÊàêÁöÑ‰ªªÂä°..."
            />
          </el-form-item>

          <el-form-item label="‰∏ä‰∏ãÊñáËÉåÊôØ">
            <el-input
              v-model="config.context"
              type="textarea"
              :rows="3"
              placeholder="Êèê‰æõÁõ∏ÂÖ≥ËÉåÊôØ‰ø°ÊÅØ..."
            />
          </el-form-item>

          <el-form-item label="ËæìÂá∫È£éÊ†º">
            <el-select v-model="config.style" placeholder="ÈÄâÊã©ËæìÂá∫È£éÊ†º">
              <el-option v-for="style in styleOptions" :key="style.value" :label="style.label" :value="style.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="ËæìÂá∫Ê†ºÂºè">
            <el-select v-model="config.format" placeholder="ÈÄâÊã©ËæìÂá∫Ê†ºÂºè">
              <el-option v-for="format in formatOptions" :key="format.value" :label="format.label" :value="format.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="Á§∫‰æã">
            <el-input
              v-model="config.examples"
              type="textarea"
              :rows="3"
              placeholder="Êèê‰æõÁ§∫‰æãËæìÂÖ•ËæìÂá∫..."
            />
          </el-form-item>

          <el-form-item label="Á∫¶ÊùüÊù°‰ª∂">
            <el-input
              v-model="config.constraints"
              type="textarea"
              :rows="2"
              placeholder="Ê∑ªÂä†Á∫¶ÊùüÊù°‰ª∂..."
            />
          </el-form-item>
        </div>
      </div>

      <!-- ÈúÄÊ±Ç‰ø°ÊÅØ -->
      <div class="config-section">
        <div class="section-header" @click="toggleSection('requirements')">
          <h3>ÈúÄÊ±Ç‰ø°ÊÅØ</h3>
          <el-icon class="section-toggle">
            <component :is="expandedSections.requirements ? 'ArrowUp' : 'ArrowDown'" />
          </el-icon>
        </div>
        <div v-show="expandedSections.requirements" class="section-content">
          <el-form-item label="È°πÁõÆÁ±ªÂûã">
            <el-select v-model="config.projectType" placeholder="ÈÄâÊã©È°πÁõÆÁ±ªÂûã">
              <el-option v-for="type in projectTypes" :key="type.value" :label="type.label" :value="type.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="È°πÁõÆÂ§çÊùÇÂ∫¶">
            <el-select v-model="config.complexity" placeholder="ÈÄâÊã©È°πÁõÆÂ§çÊùÇÂ∫¶">
              <el-option v-for="complexity in complexityLevels" :key="complexity.value" :label="complexity.label" :value="complexity.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="ËØ¶ÁªÜÈúÄÊ±Ç">
            <el-input
              v-model="config.requirements"
              type="textarea"
              :rows="4"
              placeholder="ÊèèËø∞ÂÖ∑‰ΩìÁöÑÂäüËÉΩÈúÄÊ±Ç„ÄÅ‰∏öÂä°ÈÄªËæë„ÄÅÁî®Êà∑ÊïÖ‰∫ãÁ≠â..."
            />
          </el-form-item>
        </div>
      </div>

      <!-- ÊäÄÊúØËßÑÊ†º -->
      <div class="config-section">
        <div class="section-header" @click="toggleSection('technical')">
          <h3>ÊäÄÊúØËßÑÊ†º</h3>
          <el-icon class="section-toggle">
            <component :is="expandedSections.technical ? 'ArrowUp' : 'ArrowDown'" />
          </el-icon>
        </div>
        <div v-show="expandedSections.technical" class="section-content">
          <el-form-item label="ÊÄßËÉΩË¶ÅÊ±Ç">
            <el-select v-model="config.performance" placeholder="ÈÄâÊã©ÊÄßËÉΩË¶ÅÊ±Ç">
              <el-option v-for="perf in performanceLevels" :key="perf.value" :label="perf.label" :value="perf.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="Êû∂ÊûÑËÆæËÆ°">
            <el-input
              v-model="config.architecture"
              type="textarea"
              :rows="3"
              placeholder="ÊèèËø∞Á≥ªÁªüÊû∂ÊûÑ„ÄÅÊ®°ÂùóËÆæËÆ°„ÄÅÊï∞ÊçÆÊµÅÁ≠â..."
            />
          </el-form-item>

          <el-form-item label="ÊµãËØïÁ≠ñÁï•">
            <el-select v-model="config.testing" placeholder="ÈÄâÊã©ÊµãËØïÁ≠ñÁï•">
              <el-option v-for="test in testingStrategies" :key="test.value" :label="test.label" :value="test.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="ÈÉ®ÁΩ≤ÁéØÂ¢É">
            <el-select v-model="config.deployment" placeholder="ÈÄâÊã©ÈÉ®ÁΩ≤ÁéØÂ¢É">
              <el-option v-for="env in deploymentEnvs" :key="env.value" :label="env.label" :value="env.value" />
            </el-select>
          </el-form-item>

          <el-form-item label="ÂÆâÂÖ®Ë¶ÅÊ±Ç">
            <el-input
              v-model="config.security"
              type="textarea"
              :rows="2"
              placeholder="ÊèèËø∞ÂÆâÂÖ®Ë¶ÅÊ±Ç„ÄÅËÆ§ËØÅÊéàÊùÉ„ÄÅÊï∞ÊçÆ‰øùÊä§Á≠â..."
            />
          </el-form-item>

          <el-form-item label="Êâ©Â±ïÊÄßË¶ÅÊ±Ç">
            <el-input
              v-model="config.scalability"
              type="textarea"
              :rows="2"
              placeholder="ÊèèËø∞Êâ©Â±ïÊÄßË¶ÅÊ±Ç„ÄÅÂπ∂ÂèëÂ§ÑÁêÜ„ÄÅË¥üËΩΩÂùáË°°Á≠â..."
            />
          </el-form-item>
        </div>
      </div>

      <!-- Ëá™ÂÆö‰πâÂ≠óÊÆµ -->
      <el-divider>Ëá™ÂÆö‰πâÂ≠óÊÆµ</el-divider>
      
      <div v-for="(field, index) in config.customFields" :key="field.id" class="custom-field">
        <el-form-item :label="field.label">
          <div style="display: flex; gap: 10px; align-items: center;">
            <el-input
              v-if="field.type === 'input'"
              v-model="field.value"
              :placeholder="`ËæìÂÖ•${field.label}...`"
              style="flex: 1;"
            />
            <el-input
              v-else-if="field.type === 'textarea'"
              v-model="field.value"
              type="textarea"
              :rows="2"
              :placeholder="`ËæìÂÖ•${field.label}...`"
              style="flex: 1;"
            />
            <el-select
              v-else-if="field.type === 'select'"
              v-model="field.value"
              :placeholder="`ÈÄâÊã©${field.label}...`"
              style="flex: 1;"
            >
              <el-option
                v-for="option in field.options"
                :key="option"
                :label="option"
                :value="option"
              />
            </el-select>
            <el-button
              type="danger"
              size="small"
              :icon="Delete"
              @click="removeCustomField(index)"
            />
          </div>
        </el-form-item>
      </div>

      <el-button
        type="primary"
        :icon="Plus"
        @click="showAddFieldDialog = true"
        style="width: 100%; margin-top: 10px;"
      >
        Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠óÊÆµ
      </el-button>

    </el-form>

    <!-- Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠óÊÆµÂØπËØùÊ°Ü -->
    <el-dialog v-model="showAddFieldDialog" title="Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠óÊÆµ" width="400px">
      <el-form :model="newField" label-width="80px">
        <el-form-item label="Â≠óÊÆµÂêçÁß∞">
          <el-input v-model="newField.label" placeholder="ËæìÂÖ•Â≠óÊÆµÂêçÁß∞" />
        </el-form-item>
        <el-form-item label="Â≠óÊÆµÁ±ªÂûã">
          <el-select v-model="newField.type" placeholder="ÈÄâÊã©Â≠óÊÆµÁ±ªÂûã">
            <el-option label="ÂçïË°åËæìÂÖ•" value="input" />
            <el-option label="Â§öË°åËæìÂÖ•" value="textarea" />
            <el-option label="‰∏ãÊãâÈÄâÊã©" value="select" />
          </el-select>
        </el-form-item>
        <el-form-item v-if="newField.type === 'select'" label="ÈÄâÈ°π">
          <el-input
            v-model="newFieldOptions"
            type="textarea"
            :rows="3"
            placeholder="ÊØèË°å‰∏Ä‰∏™ÈÄâÈ°π"
          />
        </el-form-item>
      </el-form>
      <template #footer>
        <el-button @click="showAddFieldDialog = false">ÂèñÊ∂à</el-button>
        <el-button type="primary" @click="addCustomField">Á°ÆÂÆö</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, watch, onMounted, computed } from 'vue'
import { Plus, Delete, Refresh, ArrowDown, ArrowUp } from '@element-plus/icons-vue'
import type { PromptConfig, CustomField, PromptTemplate } from '../types/prompt'

const emit = defineEmits<{
  update: [config: PromptConfig]
}>()

const config = reactive<PromptConfig>({
  role: '',
  roleCategory: '',
  techStack: [],
  task: '',
  context: '',
  style: '',
  format: '',
  examples: '',
  constraints: '',
  customFields: [],
  // Êñ∞Â¢ûÊäÄÊúØÊÄßÂ≠óÊÆµ
  projectType: '',
  complexity: '',
  requirements: '',
  performance: '',
  architecture: '',
  testing: '',
  deployment: '',
  security: '',
  scalability: ''
})

const showAddFieldDialog = ref(false)
const selectedTemplate = ref('')
const isCollapsed = ref(false)

// ÈÖçÁΩÆÂàÜÁªÑÂ±ïÂºÄÁä∂ÊÄÅ
const expandedSections = ref({
  basic: true,        // Âü∫Á°ÄÈÖçÁΩÆÈªòËÆ§Â±ïÂºÄ
  task: false,        // ‰ªªÂä°ÈÖçÁΩÆÈªòËÆ§Êî∂Ëµ∑
  requirements: false, // ÈúÄÊ±Ç‰ø°ÊÅØÈªòËÆ§Êî∂Ëµ∑
  technical: false,   // ÊäÄÊúØËßÑÊ†ºÈªòËÆ§Êî∂Ëµ∑
  custom: false       // Ëá™ÂÆö‰πâÂ≠óÊÆµÈªòËÆ§Êî∂Ëµ∑
})

const newField = reactive({
  label: '',
  type: 'input' as 'input' | 'textarea' | 'select'
})

const newFieldOptions = ref('')

// ËßíËâ≤ÂàÜÁ±ªÈÄâÈ°π
const roleCategories = [
  { label: '‰ª£Á†ÅÂºÄÂèë‰∏ìÂÆ∂', value: 'development' },
  { label: 'ÂÜÖÂÆπÂàõ‰Ωú', value: 'content' },
  { label: 'Êï∞ÊçÆÂàÜÊûê', value: 'data' },
  { label: '‰∫ßÂìÅÁÆ°ÁêÜ', value: 'product' },
  { label: 'Â∏ÇÂú∫Ëê•ÈîÄ', value: 'marketing' },
  { label: 'ÊïôËÇ≤ÂüπËÆ≠', value: 'education' },
  { label: 'ËÆæËÆ°ÂàõÊÑè', value: 'design' }
]

// ÂêÑÂàÜÁ±ª‰∏ãÁöÑÂÖ∑‰ΩìËßíËâ≤ÈÄâÈ°π
const roleOptionsByCategory = {
  development: [
    'ÂâçÁ´ØÂºÄÂèëÂ∑•Á®ãÂ∏à',
    'ÂêéÁ´ØÂºÄÂèëÂ∑•Á®ãÂ∏à', 
    'ÂÖ®Ê†àÂºÄÂèëÂ∑•Á®ãÂ∏à',
    'ÁßªÂä®Á´ØÂºÄÂèëÂ∑•Á®ãÂ∏à',
    'DevOpsÂ∑•Á®ãÂ∏à',
    'ÊµãËØïÂ∑•Á®ãÂ∏à',
    'Êû∂ÊûÑÂ∏à',
    'ÊäÄÊúØ‰∏ìÂÆ∂'
  ],
  content: [
    '‰∏ì‰∏öÂÜô‰ΩúÂä©Êâã',
    'ÂÜÖÂÆπÁ≠ñÂàíÂ∏à',
    'ÊñáÊ°àÁºñËæë',
    'ÊäÄÊúØÊñáÊ°£‰∏ìÂÆ∂'
  ],
  data: [
    'Êï∞ÊçÆÂàÜÊûêÂ∏à',
    'Êï∞ÊçÆÁßëÂ≠¶ÂÆ∂',
    'ÂïÜ‰∏öÊô∫ËÉΩ‰∏ìÂÆ∂',
    'ÁªüËÆ°ÂàÜÊûêÂ∏à'
  ],
  product: [
    '‰∫ßÂìÅÁªèÁêÜ',
    '‰∫ßÂìÅËøêËê•',
    'Áî®Êà∑‰ΩìÈ™åËÆæËÆ°Â∏à',
    '‰∫ßÂìÅÁ≠ñÁï•Â∏à'
  ],
  marketing: [
    'Â∏ÇÂú∫Ëê•ÈîÄ‰∏ìÂÆ∂',
    'ÂìÅÁâåÁ≠ñÂàíÂ∏à',
    'Êï∞Â≠óËê•ÈîÄ‰∏ìÂÆ∂',
    'Á§æ‰∫§Â™í‰ΩìËøêËê•'
  ],
  education: [
    'ÊïôËÇ≤ÂØºÂ∏à',
    'ÂüπËÆ≠Â∏à',
    'Â≠¶‰π†È°æÈóÆ',
    'Áü•ËØÜÁÆ°ÁêÜ‰∏ìÂÆ∂'
  ],
  design: [
    'UI/UXËÆæËÆ°Â∏à',
    'Âπ≥Èù¢ËÆæËÆ°Â∏à',
    'ÂàõÊÑèÊÄªÁõë',
    'ËßÜËßâËÆæËÆ°Â∏à'
  ]
}

// ÂâçÁ´ØÊäÄÊúØÊ†àÈÄâÈ°π
const frontendTechStack = [
  'Vue.js',
  'React',
  'Angular',
  'TypeScript',
  'JavaScript',
  'HTML5',
  'CSS3',
  'Sass/SCSS',
  'Less',
  'Tailwind CSS',
  'Bootstrap',
  'Element Plus',
  'Ant Design',
  'Vite',
  'Webpack',
  'Node.js',
  'Express',
  'Next.js',
  'Nuxt.js',
  'Vue Router',
  'Vuex/Pinia',
  'Redux',
  'MobX',
  'Jest',
  'Cypress',
  'ESLint',
  'Prettier'
]

// ËÆ°ÁÆóÂΩìÂâçÂàÜÁ±ª‰∏ãÁöÑËßíËâ≤ÈÄâÈ°π
const filteredRoleOptions = computed(() => {
  if (!config.roleCategory) return []
  return roleOptionsByCategory[config.roleCategory as keyof typeof roleOptionsByCategory] || []
})

// ËßíËâ≤ÂàÜÁ±ªÂèòÂåñÂ§ÑÁêÜ
const onRoleCategoryChange = () => {
  // Ê∏ÖÁ©∫ÂΩìÂâçËßíËâ≤ÈÄâÊã©
  config.role = ''
  // Ê∏ÖÁ©∫ÊäÄÊúØÊ†àÈÄâÊã©
  config.techStack = []
}

// ÈáçÁΩÆÈÖçÁΩÆ
const resetConfig = () => {
  Object.assign(config, {
    role: '',
    roleCategory: '',
    techStack: [],
    task: '',
    context: '',
    style: '',
    format: '',
    examples: '',
    constraints: '',
    customFields: [],
    projectType: '',
    complexity: '',
    requirements: '',
    performance: '',
    architecture: '',
    testing: '',
    deployment: '',
    security: '',
    scalability: ''
  })
}

// ÂàáÊç¢Êï¥‰ΩìÊäòÂè†Áä∂ÊÄÅ
const toggleCollapse = () => {
  isCollapsed.value = !isCollapsed.value
  if (isCollapsed.value) {
    // ÂÖ®ÈÉ®Êî∂Ëµ∑
    Object.keys(expandedSections.value).forEach(key => {
      expandedSections.value[key] = false
    })
  } else {
    // Â±ïÂºÄÂü∫Á°ÄÈÖçÁΩÆ
    expandedSections.value.basic = true
  }
}

// ÂàáÊç¢ÂàÜÁªÑÂ±ïÂºÄÁä∂ÊÄÅ
const toggleSection = (section: string) => {
  expandedSections.value[section] = !expandedSections.value[section]
}

// Ëé∑ÂèñÊ®°ÊùøÂõæÊ†á
const getTemplateIcon = (templateId: string) => {
  const iconMap: Record<string, string> = {
    'writing-assistant': '‚úçÔ∏è',
    'vue3-questionnaire-system': '‚ö°',
    'react-admin-system': '‚öõÔ∏è',
    'code-reviewer': 'üîç'
  }
  return iconMap[templateId] || 'üìù'
}

const styleOptions = [
  { label: '‰∏ì‰∏öÊ≠£Âºè', value: 'professional' },
  { label: 'ÂèãÂ•Ω‰∫≤Âàá', value: 'friendly' },
  { label: 'ÁÆÄÊ¥ÅÊòé‰∫Ü', value: 'concise' },
  { label: 'ËØ¶ÁªÜÂÖ®Èù¢', value: 'detailed' },
  { label: 'ÂàõÊÑèÁîüÂä®', value: 'creative' },
  { label: 'ÊäÄÊúØÊÄßÂº∫', value: 'technical' }
]

const formatOptions = [
  { label: 'Á∫ØÊñáÊú¨', value: 'text' },
  { label: 'Markdown', value: 'markdown' },
  { label: 'ÂàóË°®ÂΩ¢Âºè', value: 'list' },
  { label: 'Ë°®Ê†ºÂΩ¢Âºè', value: 'table' },
  { label: 'JSONÊ†ºÂºè', value: 'json' },
  { label: '‰ª£Á†ÅÂùó', value: 'code' }
]

// È°πÁõÆÁ±ªÂûãÈÄâÈ°π
const projectTypes = [
  { label: 'WebÂ∫îÁî®', value: 'web-app' },
  { label: 'ÁßªÂä®Â∫îÁî®', value: 'mobile-app' },
  { label: 'Ê°åÈù¢Â∫îÁî®', value: 'desktop-app' },
  { label: 'APIÊúçÂä°', value: 'api-service' },
  { label: 'ÂæÆÊúçÂä°Êû∂ÊûÑ', value: 'microservice' },
  { label: 'Êï∞ÊçÆÂπ≥Âè∞', value: 'data-platform' },
  { label: 'AI/MLÈ°πÁõÆ', value: 'ai-ml' },
  { label: 'Âå∫ÂùóÈìæÂ∫îÁî®', value: 'blockchain' },
  { label: 'IoTÈ°πÁõÆ', value: 'iot' },
  { label: 'Ê∏∏ÊàèÂºÄÂèë', value: 'game' }
]

// È°πÁõÆÂ§çÊùÇÂ∫¶ÈÄâÈ°π
const complexityLevels = [
  { label: 'ÁÆÄÂçïÈ°πÁõÆ', value: 'simple' },
  { label: '‰∏≠Á≠âÂ§çÊùÇÂ∫¶', value: 'medium' },
  { label: 'Â§çÊùÇÈ°πÁõÆ', value: 'complex' },
  { label: '‰ºÅ‰∏öÁ∫ßÈ°πÁõÆ', value: 'enterprise' },
  { label: 'È´òÂπ∂ÂèëÁ≥ªÁªü', value: 'high-concurrency' },
  { label: 'ÂàÜÂ∏ÉÂºèÁ≥ªÁªü', value: 'distributed' }
]

// ÊÄßËÉΩË¶ÅÊ±ÇÈÄâÈ°π
const performanceLevels = [
  { label: 'Âü∫Á°ÄÊÄßËÉΩ', value: 'basic' },
  { label: '‰∏≠Á≠âÊÄßËÉΩ', value: 'medium' },
  { label: 'È´òÊÄßËÉΩ', value: 'high' },
  { label: 'ÊûÅËá¥ÊÄßËÉΩ', value: 'extreme' },
  { label: 'ÂÆûÊó∂ÂìçÂ∫î', value: 'realtime' },
  { label: 'Â§ßËßÑÊ®°Âπ∂Âèë', value: 'massive-concurrency' }
]

// ÊµãËØïÁ≠ñÁï•ÈÄâÈ°π
const testingStrategies = [
  { label: 'ÂçïÂÖÉÊµãËØï', value: 'unit-test' },
  { label: 'ÈõÜÊàêÊµãËØï', value: 'integration-test' },
  { label: 'Á´ØÂà∞Á´ØÊµãËØï', value: 'e2e-test' },
  { label: 'ÊÄßËÉΩÊµãËØï', value: 'performance-test' },
  { label: 'ÂÆâÂÖ®ÊµãËØï', value: 'security-test' },
  { label: 'Ëá™Âä®ÂåñÊµãËØï', value: 'automated-test' },
  { label: 'TDDÂºÄÂèë', value: 'tdd' },
  { label: 'BDDÂºÄÂèë', value: 'bdd' }
]

// ÈÉ®ÁΩ≤ÁéØÂ¢ÉÈÄâÈ°π
const deploymentEnvs = [
  { label: 'Êú¨Âú∞ÂºÄÂèë', value: 'local' },
  { label: 'ÊµãËØïÁéØÂ¢É', value: 'testing' },
  { label: 'È¢ÑÁîü‰∫ßÁéØÂ¢É', value: 'staging' },
  { label: 'Áîü‰∫ßÁéØÂ¢É', value: 'production' },
  { label: '‰∫ëÊúçÂä°Âô®', value: 'cloud' },
  { label: 'ÂÆπÂô®ÂåñÈÉ®ÁΩ≤', value: 'container' },
  { label: 'Kubernetes', value: 'k8s' },
  { label: 'Serverless', value: 'serverless' }
]

// È¢ÑËÆæÊ®°Êùø
const templates: PromptTemplate[] = [
  {
    id: 'writing-assistant',
    name: 'ÂÜô‰ΩúÂä©Êâã',
    description: 'Â∏ÆÂä©Áî®Êà∑ËøõË°åÊñáÁ´†ÂÜô‰Ωú',
    config: {
      role: '‰∏ì‰∏öÂÜô‰ΩúÂä©Êâã',
      roleCategory: 'content',
      techStack: [],
      task: 'Ê†πÊçÆÁî®Êà∑Êèê‰æõÁöÑ‰∏ªÈ¢òÂíåË¶ÅÊ±ÇÔºåÊí∞ÂÜôÈ´òË¥®ÈáèÁöÑÊñáÁ´†',
      context: 'Áî®Êà∑ÈúÄË¶Å‰∏ì‰∏öÁöÑÂÜô‰ΩúÂ∏ÆÂä©ÔºåÂåÖÊã¨ÁªìÊûÑËßÑÂàí„ÄÅÂÜÖÂÆπÁªÑÁªáÂíåËØ≠Ë®ÄÊ∂¶Ëâ≤',
      style: 'professional',
      format: 'markdown',
      examples: 'Áî®Êà∑ÔºöÂ∏ÆÊàëÂÜô‰∏ÄÁØáÂÖ≥‰∫é‰∫∫Â∑•Êô∫ËÉΩÁöÑÊñáÁ´†\nÂä©ÊâãÔºöÊàëÂ∞Ü‰∏∫ÊÇ®Êí∞ÂÜô‰∏ÄÁØáÁªìÊûÑÊ∏ÖÊô∞„ÄÅÂÜÖÂÆπ‰∏∞ÂØåÁöÑ‰∫∫Â∑•Êô∫ËÉΩ‰∏ªÈ¢òÊñáÁ´†...',
      constraints: 'ÊñáÁ´†Â∫îËØ•ÈÄªËæëÊ∏ÖÊô∞„ÄÅËØ≠Ë®ÄÊµÅÁïÖ„ÄÅÂÜÖÂÆπÂáÜÁ°Æ',
      customFields: []
    }
  },
  {
    id: 'vue3-questionnaire-system',
    name: 'Vue3ÈóÆÂç∑Á≥ªÁªüÂºÄÂèë',
    description: 'Âü∫‰∫éVue3+TypeScript+PiniaÊûÑÂª∫ÂÆåÊï¥ÈóÆÂç∑Á≥ªÁªü',
    config: {
      role: 'ÂâçÁ´ØÂºÄÂèëÂ∑•Á®ãÂ∏à',
      roleCategory: 'development',
      techStack: ['Vue.js', 'TypeScript', 'Pinia', 'Element Plus', 'Vue Router', 'Vite'],
      task: '‰ΩøÁî®Vue3 + TypeScript + Pinia + Element PlusÊäÄÊúØÊ†àÔºåÂºÄÂèë‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂú®Á∫øÈóÆÂç∑Á≥ªÁªüÔºåÂåÖÊã¨ÈóÆÂç∑ÂàõÂª∫„ÄÅÁºñËæë„ÄÅÂèëÂ∏É„ÄÅÂ°´ÂÜô„ÄÅÊï∞ÊçÆÁªüËÆ°Á≠âÂäüËÉΩÊ®°Âùó',
      context: 'È°πÁõÆÈúÄÊ±ÇÔºöÊûÑÂª∫‰∏Ä‰∏™‰ºÅ‰∏öÁ∫ßÈóÆÂç∑Á≥ªÁªüÔºåÊîØÊåÅÂ§öÁßçÈ¢òÂûãÔºàÂçïÈÄâ„ÄÅÂ§öÈÄâ„ÄÅÊñáÊú¨„ÄÅËØÑÂàÜÁ≠âÔºâÔºåÂÖ∑Â§áÈóÆÂç∑Ê®°ÊùøÁÆ°ÁêÜ„ÄÅÁî®Êà∑ÊùÉÈôêÊéßÂà∂„ÄÅÊï∞ÊçÆÂèØËßÜÂåñÂàÜÊûêÁ≠âÂäüËÉΩ„ÄÇÊäÄÊúØÊ†àÔºöVue3 Composition API + TypeScript + PiniaÁä∂ÊÄÅÁÆ°ÁêÜ + Element Plus UIÁªÑ‰ª∂Â∫ì + Vue RouterË∑ØÁî±ÁÆ°ÁêÜ + ViteÊûÑÂª∫Â∑•ÂÖ∑',
      style: 'technical',
      format: 'markdown',
      examples: `Áî®Êà∑ÔºöÂ∏ÆÊàëËÆæËÆ°ÈóÆÂç∑Á≥ªÁªüÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÁªìÊûÑ
Âä©ÊâãÔºöÂü∫‰∫éPiniaËÆæËÆ°ÈóÆÂç∑Á≥ªÁªüÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÔºö

\`\`\`typescript
// stores/questionnaire.ts
import { defineStore } from 'pinia'

export interface Question {
  id: string
  type: 'single' | 'multiple' | 'text' | 'rating' | 'date'
  title: string
  options?: string[]
  required: boolean
  order: number
}

export interface Questionnaire {
  id: string
  title: string
  description: string
  questions: Question[]
  status: 'draft' | 'published' | 'closed'
  createdAt: string
  updatedAt: string
}

export const useQuestionnaireStore = defineStore('questionnaire', {
  state: () => ({
    questionnaires: [] as Questionnaire[],
    currentQuestionnaire: null as Questionnaire | null,
    responses: [] as any[]
  }),
  
  actions: {
    async createQuestionnaire(data: Partial<Questionnaire>) {
      // ÂàõÂª∫ÈóÆÂç∑ÈÄªËæë
    },
    
    async updateQuestion(questionId: string, questionData: Partial<Question>) {
      // Êõ¥Êñ∞ÈóÆÈ¢òÈÄªËæë
    }
  }
})
\`\`\``,
      constraints: '‰ª£Á†ÅÂøÖÈ°ªÈÅµÂæ™Vue3 Composition APIÊúÄ‰Ω≥ÂÆûË∑µÔºå‰ΩøÁî®TypeScript‰∏•Ê†ºÁ±ªÂûãÊ£ÄÊü•ÔºåÁªÑ‰ª∂ËÆæËÆ°Ë¶ÅÂèØÂ§çÁî®ÔºåÁä∂ÊÄÅÁÆ°ÁêÜË¶ÅÊ∏ÖÊô∞ÔºåÊÄßËÉΩË¶Å‰ºòÂåñÔºå‰ª£Á†ÅË¶ÅÊúâËØ¶ÁªÜÊ≥®Èáä',
      customFields: [],
      // Êñ∞Â¢ûÊäÄÊúØÊÄßÂ≠óÊÆµ
      projectType: 'web-app',
      complexity: 'complex',
      requirements: 'ÊîØÊåÅÂ§öÁßçÈ¢òÂûãÔºàÂçïÈÄâ„ÄÅÂ§öÈÄâ„ÄÅÊñáÊú¨„ÄÅËØÑÂàÜ„ÄÅÊó•ÊúüÁ≠âÔºâÔºåÈóÆÂç∑Ê®°ÊùøÁÆ°ÁêÜÔºåÁî®Êà∑ÊùÉÈôêÊéßÂà∂ÔºåÊï∞ÊçÆÂèØËßÜÂåñÂàÜÊûêÔºåÂÆûÊó∂È¢ÑËßàÔºåÊâπÈáèÂØºÂÖ•ÂØºÂá∫ÔºåÁßªÂä®Á´ØÈÄÇÈÖç',
      performance: 'high',
      architecture: 'ÈááÁî®ÁªÑ‰ª∂ÂåñÊû∂ÊûÑÔºåÁä∂ÊÄÅÁÆ°ÁêÜ‰ΩøÁî®PiniaÔºåË∑ØÁî±ÁÆ°ÁêÜ‰ΩøÁî®Vue RouterÔºåUIÁªÑ‰ª∂‰ΩøÁî®Element PlusÔºåÊûÑÂª∫Â∑•ÂÖ∑‰ΩøÁî®ViteÔºåÊîØÊåÅÁÉ≠ÈáçËΩΩÂíåÂø´ÈÄüÊûÑÂª∫',
      testing: 'unit-test',
      deployment: 'container',
      security: 'Áî®Êà∑ËÆ§ËØÅ‰ΩøÁî®JWTÔºåÊï∞ÊçÆÂä†ÂØÜ‰º†ËæìÔºåÊùÉÈôêÊéßÂà∂Âü∫‰∫éËßíËâ≤ÁöÑËÆøÈóÆÊéßÂà∂ÔºàRBACÔºâÔºåÈò≤Ê≠¢XSSÂíåCSRFÊîªÂáª',
      scalability: 'ÊîØÊåÅÊ∞¥Âπ≥Êâ©Â±ïÔºå‰ΩøÁî®CDNÂä†ÈÄüÈùôÊÄÅËµÑÊ∫êÔºåÊï∞ÊçÆÂ∫ìËØªÂÜôÂàÜÁ¶ªÔºåÁºìÂ≠òÁ≠ñÁï•‰ºòÂåñÔºåÊîØÊåÅÈ´òÂπ∂ÂèëËÆøÈóÆ'
    }
  },
  {
    id: 'react-admin-system',
    name: 'ReactÁÆ°ÁêÜÁ≥ªÁªüÂºÄÂèë',
    description: 'Âü∫‰∫éReact+TypeScript+Ant DesignÊûÑÂª∫‰ºÅ‰∏öÁ∫ßÁÆ°ÁêÜÁ≥ªÁªü',
    config: {
      role: 'ÂâçÁ´ØÂºÄÂèëÂ∑•Á®ãÂ∏à',
      roleCategory: 'development',
      techStack: ['React', 'TypeScript', 'Ant Design', 'Redux Toolkit', 'React Router', 'Axios'],
      task: '‰ΩøÁî®React + TypeScript + Ant Design + Redux ToolkitÊäÄÊúØÊ†àÔºåÂºÄÂèë‰∏Ä‰∏™‰ºÅ‰∏öÁ∫ßÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªüÔºåÂåÖÊã¨Áî®Êà∑ÁÆ°ÁêÜ„ÄÅÊùÉÈôêÊéßÂà∂„ÄÅÊï∞ÊçÆÂ±ïÁ§∫„ÄÅÂõæË°®ÂàÜÊûêÁ≠âÂäüËÉΩ',
      context: 'È°πÁõÆÈúÄÊ±ÇÔºöÊûÑÂª∫‰∏Ä‰∏™ÂäüËÉΩÂÆåÊï¥ÁöÑ‰ºÅ‰∏öÂêéÂè∞ÁÆ°ÁêÜÁ≥ªÁªüÔºåÊîØÊåÅÂ§öËßíËâ≤ÊùÉÈôêÁÆ°ÁêÜ„ÄÅÊï∞ÊçÆCRUDÊìç‰Ωú„ÄÅÂõæË°®Êï∞ÊçÆÂèØËßÜÂåñ„ÄÅÊñá‰ª∂‰∏ä‰º†‰∏ãËΩΩ„ÄÅÁ≥ªÁªüÈÖçÁΩÆÁ≠âÂäüËÉΩ„ÄÇÊäÄÊúØÊ†àÔºöReact 18 + TypeScript + Ant Design UIÁªÑ‰ª∂Â∫ì + Redux ToolkitÁä∂ÊÄÅÁÆ°ÁêÜ + React RouterË∑ØÁî±ÁÆ°ÁêÜ + Axios HTTPÂÆ¢Êà∑Á´Ø',
      style: 'technical',
      format: 'markdown',
      examples: `Áî®Êà∑ÔºöÂ∏ÆÊàëËÆæËÆ°Áî®Êà∑ÊùÉÈôêÁÆ°ÁêÜÁöÑReduxÁä∂ÊÄÅÁªìÊûÑ
Âä©ÊâãÔºöÂü∫‰∫éRedux ToolkitËÆæËÆ°Áî®Êà∑ÊùÉÈôêÁÆ°ÁêÜÔºö

\`\`\`typescript
// store/slices/authSlice.ts
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'

interface User {
  id: string
  username: string
  email: string
  role: 'admin' | 'user' | 'guest'
  permissions: string[]
}

interface AuthState {
  user: User | null
  token: string | null
  isAuthenticated: boolean
  loading: boolean
}

export const loginAsync = createAsyncThunk(
  'auth/login',
  async (credentials: { username: string; password: string }) => {
    const response = await api.post('/auth/login', credentials)
    return response.data
  }
)

const authSlice = createSlice({
  name: 'auth',
  initialState: {
    user: null,
    token: null,
    isAuthenticated: false,
    loading: false
  } as AuthState,
  reducers: {
    logout: (state) => {
      state.user = null
      state.token = null
      state.isAuthenticated = false
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(loginAsync.pending, (state) => {
        state.loading = true
      })
      .addCase(loginAsync.fulfilled, (state, action) => {
        state.loading = false
        state.user = action.payload.user
        state.token = action.payload.token
        state.isAuthenticated = true
      })
  }
})
\`\`\``,
      constraints: '‰ª£Á†ÅÂøÖÈ°ªÈÅµÂæ™React HooksÊúÄ‰Ω≥ÂÆûË∑µÔºå‰ΩøÁî®TypeScript‰∏•Ê†ºÁ±ªÂûãÊ£ÄÊü•ÔºåÁªÑ‰ª∂ËÆæËÆ°Ë¶ÅÂèØÂ§çÁî®ÔºåÁä∂ÊÄÅÁÆ°ÁêÜË¶ÅÊ∏ÖÊô∞ÔºåÊÄßËÉΩË¶Å‰ºòÂåñÔºå‰ª£Á†ÅË¶ÅÊúâËØ¶ÁªÜÊ≥®Èáä',
      customFields: []
    }
  },
  {
    id: 'code-reviewer',
    name: '‰ª£Á†ÅÂÆ°Êü•‰∏ìÂÆ∂',
    description: '‰∏ì‰∏öÁöÑ‰ª£Á†ÅÂÆ°Êü•Âíå‰ºòÂåñÂª∫ËÆÆ',
    config: {
      role: '‰ª£Á†ÅÂºÄÂèë‰∏ìÂÆ∂',
      roleCategory: 'development',
      techStack: [],
      task: 'ÂÆ°Êü•Áî®Êà∑Êèê‰æõÁöÑ‰ª£Á†ÅÔºåÊèê‰æõ‰ºòÂåñÂª∫ËÆÆÂíåÊúÄ‰Ω≥ÂÆûË∑µÊåáÂØº',
      context: 'Áî®Êà∑Â∏åÊúõÊîπËøõ‰ª£Á†ÅË¥®ÈáèÔºåÊèêÈ´òÊÄßËÉΩÂíåÂèØÁª¥Êä§ÊÄß',
      style: 'technical',
      format: 'markdown',
      examples: 'Áî®Êà∑Êèê‰æõ‰ª£Á†ÅÁâáÊÆµÔºåÊàëÂ∞ÜÂàÜÊûêÂÖ∂ÈÄªËæë„ÄÅÊÄßËÉΩ„ÄÅÂÆâÂÖ®ÊÄßÁ≠âÊñπÈù¢',
      constraints: 'Âª∫ËÆÆÂ∫îËØ•ÂÖ∑‰ΩìÂèØË°åÔºåÂåÖÂê´‰ª£Á†ÅÁ§∫‰æã',
      customFields: []
    }
  }
]

// Ê∑ªÂä†Ëá™ÂÆö‰πâÂ≠óÊÆµ
const addCustomField = () => {
  if (!newField.label) return
  
  const field: CustomField = {
    id: Date.now().toString(),
    label: newField.label,
    value: '',
    type: newField.type,
    options: newField.type === 'select' ? newFieldOptions.value.split('\n').filter(opt => opt.trim()) : undefined
  }
  
  config.customFields.push(field)
  
  // ÈáçÁΩÆË°®Âçï
  newField.label = ''
  newField.type = 'input'
  newFieldOptions.value = ''
  showAddFieldDialog.value = false
}

// ÁßªÈô§Ëá™ÂÆö‰πâÂ≠óÊÆµ
const removeCustomField = (index: number) => {
  config.customFields.splice(index, 1)
}

// Âä†ËΩΩÊ®°Êùø
const loadTemplate = (templateId: string) => {
  const template = templates.find(t => t.id === templateId)
  if (template) {
    Object.assign(config, template.config)
  }
}

// ÁõëÂê¨ÈÖçÁΩÆÂèòÂåñ
watch(config, (newConfig) => {
  emit('update', { ...newConfig })
}, { deep: true })

// ÂàùÂßãÂåñÊó∂ÂèëÈÄÅÈªòËÆ§ÈÖçÁΩÆ
onMounted(() => {
  emit('update', { ...config })
})
</script>

<style scoped>
.prompt-config {
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 24px;
}

.config-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #f1f5f9;
}

.config-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0;
}

.config-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.el-form {
  flex: 1;
  overflow-y: auto;
  padding-right: 8px;
}

/* Ë°®ÂçïÂàÜÁªÑÊ†∑Âºè */
.form-section {
  background: #f8fafc;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 20px;
  border: 1px solid #e2e8f0;
}

.form-section-title {
  font-size: 14px;
  font-weight: 600;
  color: #475569;
  margin: 0 0 12px 0;
}

.custom-field {
  margin-bottom: 12px;
  padding: 12px;
  background: #f8fafc;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}

.el-form-item {
  margin-bottom: 16px;
}

.el-divider {
  margin: 20px 0;
}

/* ‰ºòÂåñË°®ÂçïÊ†áÁ≠æ */
.el-form-item__label {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  line-height: 1.4;
  margin-bottom: 6px;
}

/* ‰ºòÂåñËæìÂÖ•Ê°ÜÊ†∑Âºè */
.el-input__inner,
.el-textarea__inner {
  font-size: 14px;
  line-height: 1.5;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  transition: all 0.2s ease;
}

.el-input__inner:focus,
.el-textarea__inner:focus {
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.el-textarea__inner {
  line-height: 1.6;
  resize: vertical;
}

/* ‰ºòÂåñÈÄâÊã©Âô®Ê†∑Âºè */
.el-select {
  width: 100%;
}

.el-select .el-input__inner {
  font-size: 14px;
}

/* ‰ºòÂåñÊåâÈíÆÊ†∑Âºè */
.el-button {
  font-size: 14px;
  padding: 8px 16px;
  height: auto;
  line-height: 1.4;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.el-button--small {
  padding: 6px 12px;
  font-size: 13px;
}

.el-button--primary {
  background: #6366f1;
  border-color: #6366f1;
}

.el-button--primary:hover {
  background: #5b21b6;
  border-color: #5b21b6;
}

/* ‰ºòÂåñÊ†áÁ≠æÊ†∑Âºè */
.el-tag {
  font-size: 12px;
  padding: 4px 8px;
  height: auto;
  line-height: 1.4;
  border-radius: 6px;
  font-weight: 500;
}

/* ‰ºòÂåñÂàÜÂâ≤Á∫øÊ†∑Âºè */
.el-divider__text {
  font-size: 13px;
  font-weight: 600;
  color: #6b7280;
  padding: 0 16px;
  background: #fafafa;
}

/* ‰ºòÂåñÂØπËØùÊ°ÜÊ†∑Âºè */
.el-dialog__title {
  font-size: 16px;
  font-weight: 600;
  color: #1a1a1a;
}

.el-dialog__body {
  padding: 24px;
}

/* ‰ºòÂåñËá™ÂÆö‰πâÂ≠óÊÆµÊ†∑Âºè */
.custom-field .el-form-item {
  margin-bottom: 12px;
}

.custom-field .el-form-item__label {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
}

/* ‰ºòÂåñÈ¢ÑËÆæÊ®°ÊùøÈÄâÊã©Âô® */
.el-select-dropdown {
  border-radius: 12px !important;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
  border: none !important;
  padding: 8px 0 !important;
  max-height: 300px !important;
  overflow-y: auto !important;
}

.el-select-dropdown__item {
  font-size: 14px !important;
  padding: 12px 16px !important;
  transition: all 0.2s ease !important;
  margin: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  line-height: 1.5 !important;
}

.el-select-dropdown__item:hover {
  background: #f8fafc !important;
  color: #1a1a1a !important;
}

.el-select-dropdown__item.selected {
  background: #6366f1 !important;
  color: white !important;
}

.el-select-dropdown__item.selected:hover {
  background: #5b21b6 !important;
  color: white !important;
}

/* ‰øÆÂ§çÂ§öÈÄâÊ†áÁ≠æÂÆπÂô® */
.el-select__tags {
  max-height: 120px !important;
  overflow-y: auto !important;
  padding: 4px 0 !important;
  border: none !important;
}

.el-tag--small {
  font-size: 11px !important;
  padding: 2px 6px !important;
  height: auto !important;
  line-height: 1.3 !important;
  margin: 2px 4px 2px 0 !important;
  border: none !important;
  border-radius: 4px !important;
}


/* ‰ºòÂåñÊäÄÊúØÊ†àÈÄâÊã©Âô® */
.tech-stack-selector {
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 8px;
  background: #f8fafc;
}

/* ‰ºòÂåñË°®ÂçïÂàÜÁªÑ */
.form-group {
  margin-bottom: 24px;
}

.form-group-title {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #e2e8f0;
}

/* ‰ºòÂåñÁªüËÆ°‰ø°ÊÅØ */
.config-stats {
  background: #f8fafc;
  border-radius: 8px;
  padding: 12px;
  margin-top: 16px;
  border: 1px solid #e2e8f0;
}

.config-stats .el-tag {
  margin-right: 8px;
  margin-bottom: 4px;
}

/* È¢ÑËÆæÊ®°ÊùøÊ†∑Âºè */
.template-section {
  margin-bottom: 24px;
  padding: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  color: white;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.template-header {
  margin-bottom: 16px;
}

.template-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 4px 0;
  color: white;
}

.template-desc {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
}

.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 12px;
}

.template-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 2px solid transparent;
}

.template-card:hover {
  background: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.template-card.active {
  border-color: #6366f1;
  background: white;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
}

.template-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border-radius: 8px;
  flex-shrink: 0;
}

.template-info {
  flex: 1;
  min-width: 0;
}

.template-info h4 {
  font-size: 14px;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0 0 4px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.template-info p {
  font-size: 12px;
  color: #6b7280;
  margin: 0;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.template-actions {
  flex-shrink: 0;
}

/* ÈÖçÁΩÆÂàÜÁªÑÊ†∑Âºè */
.config-section {
  margin-bottom: 16px;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  background: #ffffff;
  overflow: hidden;
  transition: all 0.2s ease;
}

.config-section:hover {
  border-color: #6366f1;
  box-shadow: 0 2px 4px rgba(99, 102, 241, 0.1);
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: #f8fafc;
  cursor: pointer;
  transition: all 0.2s ease;
  border-bottom: 1px solid #e2e8f0;
}

.section-header:hover {
  background: #f1f5f9;
}

.section-header h3 {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin: 0;
}

.section-toggle {
  font-size: 16px;
  color: #6b7280;
  transition: transform 0.2s ease;
}

.section-content {
  padding: 16px;
  background: #ffffff;
}

.section-content .el-form-item {
  margin-bottom: 16px;
}

.section-content .el-form-item:last-child {
  margin-bottom: 0;
}

/* Êô∫ËÉΩÊòæÁ§∫ÈÄªËæë */
.config-section.auto-hide {
  opacity: 0.6;
  pointer-events: none;
}

.config-section.auto-hide .section-header {
  background: #f1f5f9;
  color: #9ca3af;
}

/* ÈÖçÁΩÆËøõÂ∫¶ÊåáÁ§∫Âô® */
.config-progress {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
  padding: 8px 12px;
  background: #f0f9ff;
  border-radius: 6px;
  border: 1px solid #bae6fd;
}

.progress-step {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #0369a1;
}

.progress-step.completed {
  color: #059669;
}

.progress-step.current {
  color: #dc2626;
  font-weight: 600;
}

/* ‰ºòÂåñÂìçÂ∫îÂºè */
@media (max-width: 768px) {
  .config-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .config-actions {
    width: 100%;
    justify-content: flex-end;
  }
  
  .section-header {
    padding: 10px 12px;
  }
  
  .section-content {
    padding: 12px;
  }
}
</style>